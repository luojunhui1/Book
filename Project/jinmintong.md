# 北京京民通后端项目开发

## 我与项目

​	进入项目完全是突如其来，在完成毕业所需的手续后，我急忙返回北京，为的不过是了结上一个阶段留下的一些残事，收拾收拾心情，准备下一个阶段生活的开始。但是当天我就被通知需要加入项目了，当天就得知整个暑假即将报销，毕业旅行、和家人的陪伴、美好安静的乡村独处时光，过去几个月里我畅想过的所有这个夏天的可能，全都在那短短的一个小时里灰飞烟灭。“生活会有自己的轨迹的，这样也未必不好，毕竟祸兮福所依”，我这样安慰自己，然后转头把那些原来的计划抛弃，很快就投入到这个项目之中。

​	开始的新鲜感为这个项目蒙上了本不属于它的甘甜气息，我埋头在一段段代码、一个个工具、一份份业务说明中，让我回忆起本科时做机器人的那段时间，和一群人一起为一个共同的目标而努力的感觉是幸福的，在初进入这个项目时，对这种幸福的期待让我不知疲倦。随后事情的发展变得熟悉起来，一起负责同一个模块的同僚因为返回山东被隔离了，有一段时间无法支持开发，这个刚起步的模块就变成只有我一个人，和大二时候那个只有我一个人的视觉组一样，一种熟悉的感觉又回到我身上，仿佛这个模块毫不重要，可能随时就会消失，既麻木又不安。

​	当项目里只有一个人的时候，坚持是最容易的事。这个时候项目和人就已经重合到一起了，想对这个项目做什么就做什么，想了解这个项目就只能找到这个人。我那时候对这个模块有很多想法，我尽量尝试理解它，宏观、微观分析，横向、纵向视角，我尽量尝试多想想，不过那段时间我实际动手写的代码却很少。忽然从一天起，四面八方的业务需求像秋天的落叶一样，簌簌全都抖落到我头上，于是我不再有时间多想了，那段时间我零零碎碎地面向功能点写了很多段代码，这种漫不经心和随意为我后面整理代码造成了很大的麻烦，甲方总有很多靶子要画给乙方，然后乙方的某头蠢牛就要蒙上头快些朝这些红红的靶子撞过去，我就是这样在撞亮了一个又一个的筋疲力尽的夜晚后，在一个又一个的早上晕乎乎地走出公司的。

​	在后来，叶子落得稀疏些了，也没有那么多标红的靶子画在我的眼前，我就开始怀疑一些虚无缥缈的东西，如一个人的品格、一个人该选择如何的生活方式、一个人怎么链上另一个人才算有感情。不光是我，我的同僚们可能有些同时也在想类似的问题，他们之中有些甚至情绪激动，冲突也在那段时间此起彼伏。我眼看着大家都不好过，却不知道怎么才算对大家最好，师长宽慰我，“你要做的只要把大家各自的问题清楚的摆出来就好了，不要看见一个问题就想着要解决它，有些问题不是你能解决的，问题会有自己消失的方式”。于是我稍稍好受了些，抱着心安理得的想法看着冲突上演，有时会做些事尝试帮上忙，但我既不知道能不能帮上，也不知道该不该帮，不过大多数时候我的帮忙确实是没有什么用，我的语焉不详、绕来绕去的帮忙遇上了很多模糊和敷衍的回应，这倒怪我自己，这些回应有时可以暂时糊上那些小问题，这很管用，因为后面其实也没人会揭开这些借口再追问，一件事又一件事就会这样过去了。

​	最后还是把大家当柴火烧的人遂了愿，毕竟木头从来不缺，木头想找个发光发亮的机会确是困难。

## 我所做的工作（What）

​	在这个项目中，我主要是完成了“任务”模块的设计和开发工作，这个模块在“京民通”系统的业务定位实际事顺延了“京办”的“以任务为核心”的理念，“任务”作为一个业务抽象概念，对应着那些对象可数字化、任务状态可计量、任务操作可标准的实际业务，参与到同一个任务中的各级用户以任务为中心进行信息交互和共享，主要包括任务创建、任务下派、任务进度、任务督办、任务统计、任务共享、任务领取、任务提示、任务执行这11个小功能，关于这个功能在业务中的价值在于减少同一任务关联的上下级之间的信息传递损耗，有效保障指令能真实、快速、有效地传递到组织网络的末端，将业务数字化，解决线下任务执行时常出现的任务状态不明确、任务责权难定义、任务指令难下达的问题。我也无意在这篇博客中拆解整个任务模块，更为具体的就不展开了。

![](https://cdn.jsdelivr.net/gh/luojunhui1/BlogPicture//Windows/202211092221280.png)

## 工作中的困难（Challenge）

其实业务代码并不困难，反而写代码在整个开发过程中我感觉是很轻松的活，所以写困难点时我也只能想到两点，关于如何提升解决这两个困难的能力，在后面的经验中会提到。

1. 业务逻辑拆分

   一个新的业务模块要开发，如排查管控模块，需要考虑到模块自身如何更好地实现，包括数据库的设计，本身业务系统能不能尽量兼容之后甲方可能会提出更多的需求，业务之间的模块化程度等等，还要考虑新业务与已有业务之间的耦合性，保证本身业务系统独立性的同时能与其他业务系统正常交互；

2. 保持业务代码整体性

   在接手到一个新的需求需要做时，这个需求往往和之前的业务系统有着一些关联，为了实现新的需求，可能要对已有的业务代码或数据库进行一些适应性改造，但是如果有时候需求多了或者需求怪了，很容易写出一些冗余或者‘脏代码’，这些代码会破坏整个项目代码的可读性，提高项目的维护难度；

## 一些经验和一些总结（Result）

1. 业务系统理解非常重要

   如何才能将业务逻辑拆分地合理，避免让后面写代码的擦屁股，关键在于能不能真正了解到甲方真正想要的是什么东西，有时候甲方也不清楚他要什么，这就考验到运营和产品的功力，经常来说甲方也是用着用着才知道自己真的需要的是什么。但最好来说，开发人员最好开始心里有个方向，了解到他们真实业务中真正的痛点是什么，围绕着这个痛点可能还会有什么需求，在跳出只解决他们的痛点的逻辑，也要考虑整个业务的逻辑完整性，比如有了创建就要有删除，有了统计就要有导出，提前心里有个底才能减少后续业务代码的重构次数；

2. 好的数据表设计非常重要

   一个好的数据表设计能省下很多事，所以设计业务的数据表是要非常小心，大表可以对不同的功能拆成不同的小表或者是基于不同的角度拆成不同的表，但是拆的要干净利落，否则一个操作要结合多张表进行很多复杂的操作，在开发上就会非常难受；

3. 写实现代码时勤于重构

   写代码时会不断地意识到可能有更好的写法，也可能会意识到当前要实现的这段代码在业务上与其他业务代码之间的逻辑关系，从而可能会对原来的其他业务代码进行重写或者拆分，写一个需求的实现代码时，着眼的不仅是当前写的这三两个接口或函数，还需要考虑到整体性，勤于重构保持本业务模块代码的可读性；

4. 测试！测试！还是测试！

   代码都需要经过测试，但有些时候测试的同僚们并不能真正理解业务，他们同时可能有着很多的功能需要测试，没有办法照顾到这个功能的方方面面，这种时候后端开发人员自己做好对各种情况的梳理，写好测试文档，自己做好所有情况的测试并记录下测试情况，也是一种义务；

5. 接受系统中的灰尘

   整个业务系统的代码，甚至是一个模块功能的代码，即使已经很注意了，可能代码中还是存在着各种又丑又脏的代码，这是可以接受的，面向业务的开发实际上还是个社会活动，它不是纯逻辑的，没有那么多界限分明的逻辑，有很多模糊还未确定的边界，有很多暂时没办法先这样写着不然要大改的妥协，没有那么多一尘不染和一步登天的事情，接受系统中的灰尘很重要。